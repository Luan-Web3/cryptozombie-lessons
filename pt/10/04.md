---
title: Migrações
actions: ['verificarResposta', 'dicas']
requireLogin: true
material:
  editor:
    language: JavaScript
    startingCode:
      "./contracts/2_crypto_zombies.js": |
        var Migrations = artifacts.require("./Migrations.sol");
        module.exports = function(deployer) {
          deployer.deploy(Migrations);
        };
    answer: |
      var CryptoZombies = artifacts.require("./CryptoZombies.sol");
      module.exports = function(deployer) {
        deployer.deploy(CryptoZombies);
      };
---

Normalmente, neste ponto, antes de implantar no **_Ethereum_**, você deseja testar seu contrato inteligente localmente. Você pode fazer isso usando uma ferramenta chamada <a href="https://truffleframework.com/ganache" target=”_blank”>Ganache</a>, que configura uma rede local **_Ethereum_**.

No entanto, embora o teste seja muito importante, ele requer uma lição inteira para ser abordado — então, vamos nos ater apenas à implantação nesta lição. Se você estiver inclinado, para aprender mais sobre testes, recomendo nossa própria lição <a href="http://cryptozombies.io/en/lesson/10" target=”_blank”>Testando contratos inteligentes com Truffle</a>.

<!-- TODO: update ^^ link, if needed -->

Para implementar no **_Ethereum_**, teremos que criar algo chamado **migração**.

Migrações são arquivos JavaScript que ajudam o **Truffle** a implementar o código no **_Ethereum_**. Observe que `truffle init` criou um contrato especial chamado `Migrations.sol` que mantém o controle das alterações que você está fazendo no seu código. A maneira como funciona é que o histórico de alterações é salvo na cadeia. Portanto, não há como você implementar o mesmo código duas vezes.

## Criando uma Nova Migração

Começaremos pelo arquivo `truffle init` já criado para nós- `./contracts/1_initial_migration.js`.
Vamos dar uma olhada no que tem dentro:

```javascript
var Migrations = artifacts.require("./Migrations.sol");
module.exports = function(deployer) {
  deployer.deploy(Migrations);
};
```

Bem direto, não é?

Primeiro, o script diz ao **Truffle** que gostaríamos de interagir com o contrato `Migrations`.

Em seguida, ele exporta uma função que aceita um objeto chamado `deployer` como parâmetro. Este objeto atua como uma interface entre você (o desenvolvedor) e o mecanismo de implantação do **Truffle**. Embora o `deployer` forneça uma infinidade de funções úteis, não as usaremos no escopo desta lição. Depois de terminar, sinta-se à vontade para verificar a <a href="https://truffleframework.com/docs/truffle/getting-started/running-migrations" target="_blank">documentação</a> do **Truffle** se estiver inclinado a aprender mais sobre as habilidades do **Truffle**.

Para deixar tudo pronto para implantação, criamos um novo arquivo `./contracts/2_crypto_zombies.js` e copiamos e colamos o conteúdo de `./contracts/1_initial_migration.js`.

# Vamos testar

1. Modifique `./contracts/2_crypto_zombies.js` para isto:

```JavaScript
var CryptoZombies = artifacts.require("./CryptoZombies.sol");
module.exports = function(deployer) {
  deployer.deploy(CryptoZombies);
};
```

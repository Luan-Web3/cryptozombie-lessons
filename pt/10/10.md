---
title: Implantar no Basechain
actions: ['verificarResposta', 'dicas']
requireLogin: true
material:
  terminal:
    help:
      Voc√™ provavelmente deve executar `truffle migrate --network basechain`.
    commands:
        "truffle migrate --network basechain":
            hint: truffle migrate --network basechain
            output: |
              Starting migrations...
              ======================
              > Network name:    'basechain'
              > Network id:      13654820909954
              > Block gas limit: 0


              1_initial_migration.js
              ======================

                Replacing 'Migrations'
                ----------------------
                > transaction hash:    0x5aaab85541e843d54926612e0b4f5faf2d48df8ad461b5f0de571565cabe8dc6
                > Blocks: 0            Seconds: 0
                > contract address:    0xc0eCB06312a20f9435E6Ed3B7eFD7bc0c0865BF2
                > account:             0xE046eB99Cbe99d6760ff01304E25F1dD9116F558
                > balance:             0
                > gas used:            0
                > gas price:           0 gwei
                > value sent:          0 ETH
                > total cost:          0 ETH


                > Saving migration to chain.
                > Saving artifacts
                -------------------------------------
                > Total cost:                   0 ETH

                2_crypto_zombies.js
                =================

                  Replacing 'CryptoZombies'
                  -----------------------
                  > transaction hash:    0xeed20de79685ab845e1e848bb871ce87d2fc532d7c87f40b9b25f2bf75b4e3a8
                  > Blocks: 0            Seconds: 0
                  > contract address:    0xDf2986bbDa42404C8f43A5851aF887B2A3a9CFaB
                  > account:             0xE046eB99Cbe99d6760ff01304E25F1dD9116F558
                  > balance:             0
                  > gas used:            0
                  > gas price:           0 gwei
                  > value sent:          0 ETH
                  > total cost:          0 ETH


                  > Saving migration to chain.
                  > Saving artifacts
                  -------------------------------------
                  > Total cost:                   0 ETH



---

Parab√©ns! Voc√™ implantou com sucesso na **_Loom_** Testnet. Mas voc√™ consegue adivinhar o que vem a seguir?ü§î

Sim, voc√™ est√° certo! Este cap√≠tulo o guiar√° pelo processo de implanta√ß√£o na **_Basechain_** (que √© nossa Mainnet).

Aqui est√° um breve resumo do que voc√™ far√° neste cap√≠tulo:

- Crie uma nova chave privada.
- Criar uma nova chave privada √© bem direto. Mas j√° que estamos falando sobre implantar na rede principal, √© hora de levar a seguran√ßa mais a s√©rio. Portanto, mostraremos como passar a chave privada com seguran√ßa para **Truffle**.
- Diga a **Truffle** como implantar em **_Basechain_** adicionando um novo objeto ao arquivo de configura√ß√£o `truffle.js`.
- Coloque suas chaves de implanta√ß√£o na lista de permiss√µes para que voc√™ possa implantar em **_Basechain_**.
- Por fim, encerramos tudo implantando o contrato inteligente.

### Crie uma nova chave privada

Voc√™ j√° sabe como criar uma chave privada. No entanto, precisamos mudar o nome do arquivo no qual vamos salv√°-la:

```bash
./loom genkey -a mainnet_public_key -k mainnet_private_key
local address: 0x07419790A773Cc6a2840f1c092240922B61eC778
local address base64: B0GXkKdzzGooQPHAkiQJIrYex3g=
```

### Passe a chave privada com seguran√ßa para o Truffle

A pr√≥xima coisa que queremos fazer √© evitar que o arquivo de chave privada seja enviado para o GitHub. Para fazer isso, vamos criar um novo arquivo chamado `.gitignore`:

```bash
touch .gitignore
```

Agora vamos "dizer" ao GitHub que queremos que ele ignore o arquivo no qual salvamos a chave privada, digitando o seguinte comando:

```bash
echo mainnet_private_key >> .gitignore
```

Agora que nos certificamos de que nossos segredos n√£o ser√£o enviados para o GitHub, precisamos editar o arquivo de configura√ß√£o `truffle.js` e fazer com que **Truffle** leia a chave privada deste arquivo.

Vamos come√ßar importando algumas coisas:

```js
const { readFileSync } = require('fs')
const path = require('path')
const { join } = require('path')
```

Em seguida, queremos definir uma fun√ß√£o que leia a chave privada de um arquivo e inicialize um novo `LoomTruffleProvider`:

```js
function getLoomProviderWithPrivateKey (privateKeyPath, chainId, writeUrl, readUrl) {
  const privateKey = readFileSync(privateKeyPath, 'utf-8');
  return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
}
```

Bem direto, n√£o √©?

### Diga ao Truffle como implementar no Basechain

Agora, precisamos deixar o **Truffle** saber como implementar no **_Basechain_**. Para fazer isso, vamos adicionar um novo objeto ao `truffle.js`

```js
basechain: {
  provider: function() {
    const chainId = 'default';
    const writeUrl = 'http://basechain.dappchains.com/rpc';
    const readUrl = 'http://basechain.dappchains.com/query';
    const privateKeyPath = path.join(__dirname, 'mainnet_private_key');
    const loomTruffleProvider = getLoomProviderWithPrivateKey(privateKeyPath, chainId, writeUrl, readUrl);
    return loomTruffleProvider;
    },
  network_id: '*'
}
```

Neste ponto, seu arquivo `truffle.js` deve ser parecido com o seguinte:

```js
// Inicialize HDWalletProvider
const HDWalletProvider = require("truffle-hdwallet-provider");

const { readFileSync } = require('fs')
const path = require('path')
const { join } = require('path')

// Defina seu pr√≥prio mnem√¥nico aqui
const mnemonic = "YOUR_MNEMONIC";

function getLoomProviderWithPrivateKey (privateKeyPath, chainId, writeUrl, readUrl) {
  const privateKey = readFileSync(privateKeyPath, 'utf-8');
  return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
}

// Exporta√ß√µes de m√≥dulos para tornar esta configura√ß√£o dispon√≠vel para o pr√≥prio Truffle
module.exports = {
  // Objetos com configura√ß√£o para cada rede
  networks: {
    // Configura√ß√£o para mainnet
    mainnet: {
      provider: function () {
        // Configurando o provedor com o endere√ßo Mainnet e Token da Infura
        return new HDWalletProvider(mnemonic, "https://mainnet.infura.io/v3/YOUR_TOKEN")
      },
      network_id: "1"
    },
    // Configura√ß√£o para rede rinkeby
    rinkeby: {
      // Fun√ß√£o especial para configurar o provedor
      provider: function () {
        // Configurando o provedor com o endere√ßo e token Infura Rinkeby
        return new HDWalletProvider(mnemonic, "https://rinkeby.infura.io/v3/YOUR_TOKEN")
      },
      // Id da rede √© 4 para Rinkeby
      network_id: 4
    },

    basechain: {
      provider: function() {
        const chainId = 'default';
        const writeUrl = 'http://basechain.dappchains.com/rpc';
        const readUrl = 'http://basechain.dappchains.com/query';
        const privateKeyPath = path.join(__dirname, 'mainnet_private_key');
        const loomTruffleProvider = getLoomProviderWithPrivateKey(privateKeyPath, chainId, writeUrl, readUrl);
        return loomTruffleProvider;
        },
      network_id: '*'
    }
  }
};
```

### Coloque suas chaves de implanta√ß√£o na lista de permiss√µes

Antes de implantar no **_Basechain_**, voc√™ precisa colocar suas chaves na lista de permiss√µes seguindo as instru√ß√µes do nosso guia <a href="https://loomx.io/developers/en/deploy-loom-mainnet.html" target=_blank>Implantar na Mainnet</a>. N√£o se preocupe com isso agora, mas tenha em mente que voc√™ precisa fazer isso depois de terminar este tutorial.

N√≥s seguimos em frente e executamos todas essas etapas e agora estamos prontos para implantar no **_Basechain_**!

# Vamos testar

1. Execute `truffle migrate --network basechain`.

Incr√≠vel, voc√™ acabou de implantar seu contrato inteligente no Basechain!üëèüèª
